name: OAuth Framework
author: Akira Sawada
version: 0.11
schema_version: 0.11
object_types:
    oauth_token: MT::OAuth::Token
applications:
    cms:
        menus:
            # MT5
            settings:oauthserver:
                order: 110000
                label: OAuth Service Providers
                mode: list_oauth_providers
                view: system
                permit_action: manage_oauth_clients
            settings:listoauthtokens:
                order: 10000
                label: My OAuth Handshakes
                mode: list_oauth_tokens
                view: system
            # MT4
            prefs:oauthserver:
                order: 110000
                label: OAuth Service Providers
                mode: list_oauth_providers
                view: system
                condition: sub { MT->app->user->is_superuser }
            prefs:listoauthtokens:
                order: 10000
                label: My OAuth Handshakes
                mode: list_oauth_tokens
                view: system

        methods:
            list_oauth_providers: $OAuthFramework::MT::CMS::OAuth::list_oauth_providers
            save_oauth_consumer_setting: $OAuthFramework::MT::CMS::OAuth::save_oauth_consumer_setting
            list_oauth_tokens: $OAuthFramework::MT::CMS::OAuth::list_oauth_tokens
            revoke_handshake: $OAuthFramework::MT::CMS::OAuth::revoke_handshake
            oauth_handshake: $OAuthFramework::MT::CMS::OAuth::oauth_handshake
            oauth_verified: $OAuthFramework::MT::CMS::OAuth::oauth_verified
oauth_service_providers:
    foursquare:
        label: foursquare
        regist_url: http://foursquare.com/oauth/register
        manage_url: http://foursquare.com/oauth
        request_token_url: http://foursquare.com/oauth/request_token
        access_token_url: http://foursquare.com/oauth/access_token
        authorize_url: http://foursquare.com/oauth/authorize
        author_app_manage_url: http://foursquare.com/settings
        protocol_version: 1_0
